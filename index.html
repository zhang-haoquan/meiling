<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MELING 美菱 - 工业互联网平台项目</title>
    <link rel="stylesheet" href="style.css">
    <!-- 引入 FontAwesome 图标库 (CDN) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="app-container">
        <!-- 侧边栏 Sidebar -->
        <aside class="app-sidebar">
            <div class="sidebar-header">
                <div class="logo-area">
                    <!-- 使用文字模拟Logo，实际项目中应为img -->
                    <span class="brand-name">MELING 美菱</span>
                </div>
            </div>
            
            <nav class="sidebar-nav">
                <ul class="nav-list">
                    <li class="nav-item active">
                        <a href="#kb" class="nav-link">
                            <i class="fa-solid fa-book"></i>
                            <span>知识库</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#graph" class="nav-link">
                            <i class="fa-solid fa-project-diagram"></i>
                            <span>知识图谱</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link">
                            <i class="fa-solid fa-chart-line"></i>
                            <span>备件铭牌</span>
                        </a>
                    </li>
                    <li class="nav-item has-submenu">
                        <a href="#" class="nav-link">
                            <i class="fa-solid fa-paper-plane"></i>
                            <span>故障方案推送</span>
                            <i class="fa-solid fa-chevron-down arrow"></i>
                        </a>
                    </li>
                    <li class="nav-item has-submenu">
                        <a href="#" class="nav-link">
                            <i class="fa-solid fa-file-alt"></i>
                            <span>数据报告</span>
                            <i class="fa-solid fa-chevron-down arrow"></i>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link">
                            <i class="fa-solid fa-chart-board"></i>
                            <span>数据看板</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#logs" class="nav-link">
                            <i class="fa-solid fa-history"></i>
                            <span>日志记录</span>
                        </a>
                    </li>
                    <!-- System Settings (New) -->
                    <li class="nav-item has-submenu" id="settings-menu">
                        <a href="javascript:void(0);" class="nav-link submenu-toggle">
                            <i class="fa-solid fa-cog"></i>
                            <span>系统设置</span>
                            <i class="fa-solid fa-chevron-down arrow"></i>
                        </a>
                        <ul class="submenu">
                            <li class="nav-item">
                                <a href="#settings-kb" class="nav-link">
                                    <i class="fa-solid fa-file-alt"></i>
                                    <span>知识库设置</span>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="#settings-graph" class="nav-link">
                                    <i class="fa-solid fa-project-diagram"></i>
                                    <span>知识图谱设置</span>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="#settings-spare" class="nav-link">
                                    <i class="fa-solid fa-tags"></i>
                                    <span>备件铭牌设置</span>
                                </a>
                            </li>
                        </ul>
                    </li>
                </ul>
            </nav>

            <div class="sidebar-footer">
                <div class="user-profile">
                    <div class="avatar">管</div>
                    <span class="username">管理员</span>
                </div>
            </div>
        </aside>

        <!-- 主内容区 Main Content -->
        <main class="main-content">
            <!-- 顶部标题栏 Top Header -->
            <header class="top-header">
                <h1 class="project-title">工业互联网平台项目</h1>
            </header>

            <!-- 页面内容 Page Body -->
            <div class="page-body">
                <!-- 视图容器：知识库 (默认视图) -->
                <div id="view-kb" class="page-view active">
                    <div class="content-wrapper">
                        <div class="page-header">
                            <h2>知识库</h2>
                        </div>

                        <!-- 工具栏 Toolbar -->
                        <div class="toolbar">
                            <div class="search-box">
                                <i class="fa-solid fa-search search-icon"></i>
                                <input type="text" placeholder="搜索知识库...">
                            </div>
                            <button class="btn btn-primary">
                                <i class="fa-solid fa-plus"></i> 新建
                            </button>
                        </div>

                        <!-- 数据表格 Data Table -->
                        <div class="table-container">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th style="width: 60px;">序号</th>
                                        <th>知识库名称</th>
                                        <th>知识库描述</th>
                                        <th>解析器</th>
                                        <th>文档数量</th>
                                        <th>创建人</th>
                                        <th>创建时间</th>
                                        <th style="width: 200px;">操作</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>1</td>
                                        <td>
                                            <div class="kb-name">
                                                <span class="icon-box purple"><i class="fa-regular fa-file-alt"></i></span>
                                                <span>25号联采机故障知识库</span>
                                            </div>
                                        </td>
                                        <td class="text-gray">设备故障库示例</td>
                                        <td class="text-gray">通用解析器</td>
                                        <td>3</td>
                                        <td>管理员</td>
                                        <td class="text-gray">2025-06-18 17:52</td>
                                        <td>
                                            <div class="action-buttons">
                                                <a href="#" class="action-link"><i class="fa-regular fa-eye"></i> 查看</a>
                                                <a href="#" class="action-link"><i class="fa-regular fa-edit"></i> 编辑</a>
                                                <a href="#" class="action-link delete"><i class="fa-regular fa-trash-can"></i> 删除</a>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>2</td>
                                        <td>
                                            <div class="kb-name">
                                                <span class="icon-box purple"><i class="fa-regular fa-file-alt"></i></span>
                                                <span>25号联采机操作知识库</span>
                                            </div>
                                        </td>
                                        <td class="text-gray">操作知识库示例</td>
                                        <td class="text-gray">通用解析器</td>
                                        <td>7</td>
                                        <td>管理员</td>
                                        <td class="text-gray">2025-06-19 09:00</td>
                                        <td>
                                            <div class="action-buttons">
                                                <a href="#" class="action-link"><i class="fa-regular fa-eye"></i> 查看</a>
                                                <a href="#" class="action-link"><i class="fa-regular fa-edit"></i> 编辑</a>
                                                <a href="#" class="action-link delete"><i class="fa-regular fa-trash-can"></i> 删除</a>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- 视图容器：知识库设置 -->
                <div id="view-settings-kb" class="page-view">
                    <div class="content-wrapper">
                        <div class="page-header">
                            <h2>知识库设置</h2>
                        </div>
                        <div class="settings-content">
                            <!-- 知识库标签设置模块 -->
                            <div class="settings-card half-width">
                                <div class="card-header">
                                    <h3 class="card-title">知识库标签设置</h3>
                                    <button class="btn btn-primary btn-sm" id="btn-add-tag">
                                        <i class="fa-solid fa-plus"></i> 新增标签类型
                                    </button>
                                </div>
                                <div class="card-body">
                                    <div class="table-loading-overlay hidden" id="tag-loading">
                                        <i class="fa-solid fa-spinner fa-spin"></i> 加载中...
                                    </div>
                                    <table class="settings-table" id="tag-table">
                                        <thead>
                                            <tr>
                                                <th style="width: 30%;">标签类型</th>
                                                <th style="width: 50%;">标签</th>
                                                <th style="width: 20%;">操作</th>
                                            </tr>
                                        </thead>
                                        <tbody id="tag-table-body">
                                            <!-- Data populated by JS -->
                                        </tbody>
                                    </table>
                                    <div class="pagination-controls">
                                        <button class="btn-page" id="tag-prev-page" disabled><i class="fa-solid fa-chevron-left"></i></button>
                                        <span class="page-info">第 <span id="tag-current-page">1</span> 页</span>
                                        <button class="btn-page" id="tag-next-page" disabled><i class="fa-solid fa-chevron-right"></i></button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Add Tag Modal -->
                <div class="modal-overlay hidden" id="modal-add-tag">
                    <div class="modal-container lg">
                        <div class="modal-header">
                            <h3>新增标签类型</h3>
                            <button class="modal-close-btn">&times;</button>
                        </div>
                        <div class="modal-body">
                            <form id="form-add-tag">
                                <div class="form-group">
                                    <label for="tag-name-input">标签类型 <span class="required">*</span></label>
                                    <input type="text" id="tag-name-input" class="form-control" placeholder="请输入标签类型">
                                    <div class="error-message" id="tag-name-error"></div>
                                </div>
                                <div class="form-group">
                                    <label>标签</label>
                                    <div class="tag-input-container" id="tag-kb-container">
                                        <!-- Tags will be rendered here -->
                                        <input type="text" class="tag-input-field" id="tag-kb-input" placeholder="输入后按回车添加标签">
                                    </div>
                                    <div class="helper-text">输入后按回车添加标签，最多可添加20个标签</div>
                                    <div class="error-message" id="tag-kb-error"></div>
                                </div>
                            </form>
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-default modal-cancel-btn">取消</button>
                            <button class="btn btn-primary" id="btn-save-tag">确认</button>
                        </div>
                    </div>
                </div>

                <!-- Edit Tag Modal -->
                <div class="modal-overlay hidden" id="modal-edit-tag">
                    <div class="modal-container lg">
                        <div class="modal-header">
                            <h3>编辑标签类型</h3>
                            <button class="modal-close-btn">&times;</button>
                        </div>
                        <div class="modal-body">
                            <form id="form-edit-tag">
                                <div class="form-group">
                                    <label for="tag-name-edit-input">标签类型 <span class="required">*</span></label>
                                    <input type="text" id="tag-name-edit-input" class="form-control" placeholder="请输入标签类型">
                                    <div class="error-message" id="tag-name-edit-error"></div>
                                </div>
                                <div class="form-group">
                                    <label>标签</label>
                                    <div class="tag-input-container" id="tag-kb-edit-container">
                                        <!-- Tags will be rendered here -->
                                        <input type="text" class="tag-input-field" id="tag-kb-edit-input" placeholder="输入后按回车添加标签">
                                    </div>
                                    <div class="helper-text">输入后按回车添加标签，最多可添加20个标签</div>
                                    <div class="error-message" id="tag-kb-edit-error"></div>
                                </div>
                            </form>
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-default modal-cancel-btn">取消</button>
                            <button class="btn btn-primary" id="btn-save-edit-tag">保存</button>
                        </div>
                    </div>
                </div>

                <!-- Delete Confirmation Modal -->
                <div class="modal-overlay hidden" id="modal-confirm-delete">
                    <div class="modal-container sm">
                        <div class="modal-header">
                            <h3><i class="fa-solid fa-exclamation-triangle text-warning"></i> 确认删除</h3>
                        </div>
                        <div class="modal-body">
                            <p>确定要删除该标签吗？此操作无法撤销。</p>
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-default modal-cancel-btn">取消</button>
                            <button class="btn btn-danger" id="btn-confirm-delete">删除</button>
                        </div>
                    </div>
                </div>

                <!-- View Tag Modal -->
                <div class="modal-overlay hidden" id="modal-view-tag">
                    <div class="modal-container lg">
                        <div class="modal-header">
                            <h3>查看标签详情</h3>
                            <button class="modal-close-btn">&times;</button>
                        </div>
                        <div class="modal-body">
                            <div class="form-group">
                                <label>标签类型</label>
                                <div class="view-only-field" id="view-tag-name"></div>
                            </div>
                            <div class="form-group">
                                <label>关联知识库</label>
                                <div class="view-only-field" id="view-tag-kbs"></div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-default modal-cancel-btn">关闭</button>
                        </div>
                    </div>
                </div>

                <!-- 视图容器：知识图谱设置 -->
                <div id="view-settings-graph" class="page-view">
                    <div class="content-wrapper">
                        <div class="page-header">
                            <h2>知识图谱设置</h2>
                        </div>
                        <div class="settings-content">
                            <!-- 文档类型配置模块 -->
                            <div class="settings-card half-width">
                                <div class="card-header">
                                    <h3 class="card-title">文档实体类型配置</h3>
                                    <button class="btn btn-primary btn-sm" id="btn-add-doctype">
                                        <i class="fa-solid fa-plus"></i> 新增文档类型
                                    </button>
                                </div>
                                <div class="card-body">
                                    <div class="table-loading-overlay hidden" id="doctype-loading">
                                        <i class="fa-solid fa-spinner fa-spin"></i> 加载中...
                                    </div>
                                    <table class="settings-table" id="doctype-table">
                                        <thead>
                                            <tr>
                                                <th style="width: 30%;">文档类型</th>
                                                <th style="width: 50%;">实体类型</th>
                                                <th style="width: 20%;">操作</th>
                                            </tr>
                                        </thead>
                                        <tbody id="doctype-table-body">
                                            <!-- Data populated by JS -->
                                        </tbody>
                                    </table>
                                    <div class="pagination-controls">
                                        <button class="btn-page" id="doctype-prev-page" disabled><i class="fa-solid fa-chevron-left"></i></button>
                                        <span class="page-info">第 <span id="doctype-current-page">1</span> 页</span>
                                        <button class="btn-page" id="doctype-next-page" disabled><i class="fa-solid fa-chevron-right"></i></button>
                                    </div>
                                </div>
                            </div>




                        </div>
                    </div>
                </div>



                <!-- Add Document Type Modal -->
                <div class="modal-overlay hidden" id="modal-add-doctype">
                    <div class="modal-container lg">
                        <div class="modal-header">
                            <h3>新增文档类型</h3>
                            <button class="modal-close-btn">&times;</button>
                        </div>
                        <div class="modal-body">
                            <form id="form-add-doctype">
                                <div class="form-group">
                                    <label for="doctype-name-input">文档类型 <span class="required">*</span></label>
                                    <input type="text" id="doctype-name-input" class="form-control" placeholder="请输入文档类型">
                                    <div class="error-message" id="doctype-name-error"></div>
                                </div>
                                <div class="form-group">
                                    <label>实体类型配置</label>
                                    <div class="tag-input-container" id="doctype-entity-container">
                                        <!-- Tags will be rendered here -->
                                        <input type="text" class="tag-input-field" id="doctype-entity-input" placeholder="输入后按回车添加标签">
                                    </div>
                                    <div class="helper-text">输入后按回车添加标签，最多可添加20个标签</div>
                                    <div class="error-message" id="doctype-entity-error"></div>
                                </div>
                            </form>
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-default modal-cancel-btn">取消</button>
                            <button class="btn btn-primary" id="btn-save-doctype">确认</button>
                        </div>
                    </div>
                </div>

                <!-- Edit Document Type Modal -->
                <div class="modal-overlay hidden" id="modal-edit-doctype">
                    <div class="modal-container lg">
                        <div class="modal-header">
                            <h3>编辑文档类型</h3>
                            <button class="modal-close-btn">&times;</button>
                        </div>
                        <div class="modal-body">
                            <form id="form-edit-doctype">
                                <div class="form-group">
                                    <label for="doctype-name-edit-input">文档类型 <span class="required">*</span></label>
                                    <input type="text" id="doctype-name-edit-input" class="form-control" placeholder="请输入文档类型">
                                    <div class="error-message" id="doctype-name-edit-error"></div>
                                </div>
                                <div class="form-group">
                                    <label>实体类型配置</label>
                                    <div class="tag-input-container" id="doctype-entity-edit-container">
                                        <!-- Tags will be rendered here -->
                                        <input type="text" class="tag-input-field" id="doctype-entity-edit-input" placeholder="输入后按回车添加标签">
                                    </div>
                                    <div class="helper-text">输入后按回车添加标签，最多可添加20个标签</div>
                                    <div class="error-message" id="doctype-entity-edit-error"></div>
                                </div>
                            </form>
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-default modal-cancel-btn">取消</button>
                            <button class="btn btn-primary" id="btn-save-edit-doctype">保存</button>
                        </div>
                    </div>
                </div>

                <!-- View Document Type Modal -->
                <div class="modal-overlay hidden" id="modal-view-doctype">
                    <div class="modal-container lg">
                        <div class="modal-header">
                            <h3>查看文档类型详情</h3>
                            <button class="modal-close-btn">&times;</button>
                        </div>
                        <div class="modal-body">
                            <div class="form-group">
                                <label>文档类型</label>
                                <div class="view-only-field" id="view-doctype-name"></div>
                            </div>
                            <div class="form-group">
                                <label>实体类型配置</label>
                                <div class="view-only-field" id="view-doctype-entities" style="height: auto;"></div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-default modal-cancel-btn">关闭</button>
                        </div>
                    </div>
                </div>

                <!-- Delete Document Type Confirmation Modal -->
                <div class="modal-overlay hidden" id="modal-confirm-delete-doctype">
                    <div class="modal-container sm">
                        <div class="modal-header">
                            <h3><i class="fa-solid fa-exclamation-triangle text-warning"></i> 确认删除</h3>
                        </div>
                        <div class="modal-body">
                            <p>确定要删除该文档类型吗？此操作无法撤销。</p>
                            <p class="text-warning" style="margin-top: 10px; font-size: 13px;">注意：删除后，所有关联该文档类型的实体类型配置将自动更新，移除此关联。</p>
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-default modal-cancel-btn">取消</button>
                            <button class="btn btn-danger" id="btn-confirm-delete-doctype">删除</button>
                        </div>
                    </div>
                </div>

                <!-- 视图容器：备件铭牌设置 -->
                <div id="view-settings-spare" class="page-view">
                    <div class="content-wrapper">
                        <div class="page-header">
                            <h2>备件铭牌设置</h2>
                        </div>
                        <div class="settings-content">
                            <!-- 铭牌字段级联关系设置模块 -->
                            <div class="settings-card full-width">
                                <div class="card-header">
                                    <h3 class="card-title">铭牌字段级联关系设置</h3>
                                </div>
                                <div class="card-body cascade-container">
                                    <!-- 第一栏：设备类型 -->
                                    <div class="cascade-column" id="cascade-col-type">
                                        <div class="column-header">设备类型</div>
                                        <div class="column-controls">
                                            <div class="multi-select-wrapper" id="ms-wrapper-type">
                                                <!-- Custom Multi-Select injected by JS -->
                                            </div>
                                            <button class="btn btn-primary btn-sm" id="btn-add-type">
                                                <i class="fa-solid fa-plus"></i> 添加
                                            </button>
                                        </div>
                                        <div class="column-list" id="list-type">
                                            <!-- List items populated by JS -->
                                        </div>
                                    </div>

                                    <!-- 第二栏：设备 -->
                                    <div class="cascade-column disabled" id="cascade-col-device">
                                        <div class="column-header">设备</div>
                                        <div class="column-controls">
                                            <div class="multi-select-wrapper" id="ms-wrapper-device">
                                                <!-- Custom Multi-Select injected by JS -->
                                            </div>
                                            <button class="btn btn-primary btn-sm" id="btn-add-device" disabled>
                                                <i class="fa-solid fa-plus"></i> 添加
                                            </button>
                                        </div>
                                        <div class="column-list" id="list-device">
                                            <!-- List items populated by JS -->
                                        </div>
                                    </div>

                                    <!-- 第三栏：工位 -->
                                    <div class="cascade-column disabled" id="cascade-col-station">
                                        <div class="column-header">工位</div>
                                        <div class="column-controls">
                                            <div class="multi-select-wrapper" id="ms-wrapper-station">
                                                <!-- Custom Multi-Select injected by JS -->
                                            </div>
                                            <button class="btn btn-primary btn-sm" id="btn-add-station" disabled>
                                                <i class="fa-solid fa-plus"></i> 添加
                                            </button>
                                        </div>
                                        <div class="column-list" id="list-station">
                                            <!-- List items populated by JS -->
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 悬浮按钮 Floating Action Button -->
            <button class="fab">
                <i class="fa-solid fa-robot"></i>
            </button>
        </main>
    </div>
    <script src="script.js"></script>
</body>
</html>