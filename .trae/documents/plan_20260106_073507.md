# 知识库标签设置模块重构计划

## 1. 当前模块差异分析

### 知识库标签设置模块 (index.html:204-235)

* **列结构**：标签名 | 涉及知识库 | 操作

* **标签展示**：`.tag-badge` 样式（蓝色边框标签）

* **知识库展示**：纯文本格式（最多2个 + 数量统计）

* **操作按钮**：编辑、删除（图标按钮）

### 文档实体类型配置模块 (index.html:343-373)

* **列结构**：文档类型 | 实体类型 | 操作

* **实体类型展示**：`.entity-type-tag` 样式（蓝色填充标签，最多3个 + `...+N` 溢出提示）

* **操作按钮**：查看、编辑、删除

* **查看功能**：有独立的查看详情模态框

***

## 2. 重构具体方案

### 2.1 HTML结构修改 (index.html)

**表格头部修改** (行218-223):

```html
<thead>
    <tr>
        <th style="width: 30%;">标签类型</th>
        <th style="width: 50%;">标签</th>
        <th style="width: 20%;">操作</th>
    </tr>
</thead>
```

**表格主体修改** (行165-177):

* 第一列（标签类型）：纯文本展示

* 第二列（标签）：采用 `.entity-type-tag` 标签样式展示，最多3个 + 溢出提示

* 操作列：新增查看按钮（眼睛图标）

### 2.2 CSS样式调整

**新增/优化样式**:

```css
/* 知识库标签展示样式 */
.entity-type-tag {
    display: inline-block;
    background-color: #e6f7ff;
    color: var(--primary-color);
    border: 1px solid #91d5ff;
    padding: 2px 8px;
    border-radius: 4px;
    font-size: 12px;
    margin-right: 6px;
    margin-bottom: 4px;
}

.entity-type-more {
    color: var(--text-secondary);
    font-size: 12px;
}
```

### 2.3 JavaScript逻辑修改 (script.js)

**renderTagTable() 函数重构**:

* 修改标签展示逻辑：采用 `entity-type-tag` 标签样式

* 优化溢出显示：最多3个标签 + `...+N` 提示

* 新增查看按钮事件绑定

**新增查看标签模态框**:

```html
<!-- View Tag Modal -->
<div class="modal-overlay hidden" id="modal-view-tag">
    <div class="modal-container lg">
        <div class="modal-header">
            <h3>查看标签详情</h3>
            <button class="modal-close-btn">&times;</button>
        </div>
        <div class="modal-body">
            <div class="form-group">
                <label>标签类型</label>
                <div class="view-only-field" id="view-tag-name"></div>
            </div>
            <div class="form-group">
                <label>关联知识库</label>
                <div class="view-only-field" id="view-tag-kbs"></div>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-default modal-cancel-btn">关闭</button>
        </div>
    </div>
</div>
```

**新增JS函数**:

* `window.openViewTagModal(id)` - 打开查看标签模态框

* 模态框内容填充逻辑

***

## 3. 实施步骤

1. **修改HTML结构**

   * 更新表格头部列标题

   * 添加查看标签模态框

2. **优化CSS样式**

   * 确保标签展示样式与实体类型一致

3. **重构JavaScript**

   * 更新 `renderTagTable()` 函数

   * 添加 `openViewTagModal()` 函数

   * 修改操作按钮绑定事件

4. **验证与测试**

   * 检查表格展示效果

   * 测试查看、编辑、删除功能

   * 验证响应式布局

